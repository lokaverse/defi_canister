<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../Token.html">Token</a></li></li><li><li><a href="../ckbtctest/main.html">ckbtctest/main</a></li></li><li><li><a href="../defi/main.html">defi/main</a></li></li><li><li><a href="../defi/types.html">defi/types</a></li></li><li><li><a href="../lokbtc/main.html">lokbtc/main</a></li></li><li><li><a href="../pool/main.html">pool/main</a></li></li><li><li><a href="../pool/types.html">pool/types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Token">Token</a></li></li></ul></nav><div class="documentation"><h1>lokbtc/main</h1><p>Sample token with lotto burn</p>
<p>This token uses the base sample token but adds functions to that are called once a transfer occures.
In this instance we look for a burn. If we find a burn we flip a coin and if it comes up heads we give the user back double the tokens they burned.</p>
<p>The only changes to the base code are the regitstraion of a tokens_transfered_listenier in the ICRC1 class. Supporting infrastructure can be found at the end of the actor file.</p>
<div class="declaration"><h4 class="class-declaration" id="type.Token"><span class="keyword">actor </span><span class="keyword">class </span><span class="classname">Token</span>(<span class="parameter">args</span> : ?{ icrc1 : ?<span class="type">ICRC1.InitArgs</span>; icrc2 : ?<span class="type">ICRC2.InitArgs</span>; icrc3 : <span class="type">ICRC3.InitArgs</span>; icrc4 : ?<span class="type">ICRC4.InitArgs</span> })</h4><div class="declaration"><h4 class="function" id="Token.forceRebase"><code><span class="keyword">public func </span><span class="fnname">forceRebase</span>() : <span class="keyword">async </span><span class="type">Nat</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.setCKBTCPool"><code><span class="keyword">public func </span><span class="fnname">setCKBTCPool</span>(<span class="parameter">address</span> : <span class="type">Text</span>) : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.setMinter"><code><span class="keyword">public func </span><span class="fnname">setMinter</span>(<span class="parameter">minter_</span> : <span class="type">Text</span>) : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.addAdmin"><code><span class="keyword">public func </span><span class="fnname">addAdmin</span>(<span class="parameter">p</span> : <span class="type">Text</span>) : <span class="keyword">async </span><span class="type">Nat</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_name"><code><span class="keyword">public func </span><span class="fnname">icrc1_name</span>() : <span class="keyword">async </span><span class="type">Text</span></code></h4><p><p>Functions for the ICRC1 token standard</p>
</p></div><div class="declaration"><h4 class="function" id="Token.icrc1_symbol"><code><span class="keyword">public func </span><span class="fnname">icrc1_symbol</span>() : <span class="keyword">async </span><span class="type">Text</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_decimals"><code><span class="keyword">public func </span><span class="fnname">icrc1_decimals</span>() : <span class="keyword">async </span><span class="type">Nat8</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_fee"><code><span class="keyword">public func </span><span class="fnname">icrc1_fee</span>() : <span class="keyword">async </span><span class="type">ICRC1.Balance</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_metadata"><code><span class="keyword">public func </span><span class="fnname">icrc1_metadata</span>() : <span class="keyword">async </span>[<span class="type">ICRC1.MetaDatum</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_total_supply"><code><span class="keyword">public func </span><span class="fnname">icrc1_total_supply</span>() : <span class="keyword">async </span><span class="type">ICRC1.Balance</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_minting_account"><code><span class="keyword">public func </span><span class="fnname">icrc1_minting_account</span>() : <span class="keyword">async </span>?<span class="type">ICRC1.Account</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.updateShare"><code><span class="keyword">public func </span><span class="fnname">updateShare</span>(<br/>  <span class="parameter">address</span> : <span class="type">Text</span>, <br/>  <span class="parameter">amount</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">totalShare_</span> : <span class="type">Nat</span><br/>) : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.clearData"><code><span class="keyword">public func </span><span class="fnname">clearData</span>() : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.updateTotalShare"><code><span class="keyword">public func </span><span class="fnname">updateTotalShare</span>(<span class="parameter">amount</span> : <span class="type">Nat</span>) : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_balance_of"><code><span class="keyword">public func </span><span class="fnname">icrc1_balance_of</span>(<span class="parameter">args</span> : <span class="type">ICRC1.Account</span>) : <span class="keyword">async </span><span class="type">ICRC1.Balance</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_supported_standards"><code><span class="keyword">public func </span><span class="fnname">icrc1_supported_standards</span>() : <span class="keyword">async </span>[<span class="type">ICRC1.SupportedStandard</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc1_transfer"><code><span class="keyword">public func </span><span class="fnname">icrc1_transfer</span>(<span class="parameter">args</span> : <span class="type">ICRC1.TransferArgs</span>) : <span class="keyword">async </span><span class="type">ICRC1.TransferResult</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.burn"><code><span class="keyword">public func </span><span class="fnname">burn</span>(<span class="parameter">args</span> : <span class="type">ICRC1.BurnArgs</span>) : <span class="keyword">async </span><span class="type">ICRC1.TransferResult</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc2_allowance"><code><span class="keyword">public func </span><span class="fnname">icrc2_allowance</span>(<span class="parameter">args</span> : <span class="type">ICRC2.AllowanceArgs</span>) : <span class="keyword">async </span><span class="type">ICRC2.Allowance</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc2_approve"><code><span class="keyword">public func </span><span class="fnname">icrc2_approve</span>(<span class="parameter">args</span> : <span class="type">ICRC2.ApproveArgs</span>) : <span class="keyword">async </span><span class="type">ICRC2.ApproveResponse</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc2_transfer_from"><code><span class="keyword">public func </span><span class="fnname">icrc2_transfer_from</span>(<span class="parameter">args</span> : <span class="type">ICRC2.TransferFromArgs</span>) : <span class="keyword">async </span><span class="type">ICRC2.TransferFromResponse</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc3_get_blocks"><code><span class="keyword">public func </span><span class="fnname">icrc3_get_blocks</span>(<span class="parameter">args</span> : <span class="type">ICRC3.GetBlocksArgs</span>) : <span class="keyword">async </span><span class="type">ICRC3.GetBlocksResult</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc3_get_archives"><code><span class="keyword">public func </span><span class="fnname">icrc3_get_archives</span>(<span class="parameter">args</span> : <span class="type">ICRC3.GetArchivesArgs</span>) : <span class="keyword">async </span><span class="type">ICRC3.GetArchivesResult</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc3_get_tip_certificate"><code><span class="keyword">public func </span><span class="fnname">icrc3_get_tip_certificate</span>() : <span class="keyword">async </span>?<span class="type">ICRC3.DataCertificate</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.get_tip"><code><span class="keyword">public func </span><span class="fnname">get_tip</span>() : <span class="keyword">async </span><span class="type">ICRC3.Tip</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc4_transfer_batch"><code><span class="keyword">public func </span><span class="fnname">icrc4_transfer_batch</span>(<span class="parameter">args</span> : <span class="type">ICRC4.TransferBatchArgs</span>) : <span class="keyword">async </span><span class="type">ICRC4.TransferBatchResults</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.icrc4_balance_of_batch"><code><span class="keyword">public func </span><span class="fnname">icrc4_balance_of_batch</span>(<span class="parameter">request</span> : <span class="type">ICRC4.BalanceQueryArgs</span>) : <span class="keyword">async </span><span class="type">ICRC4.BalanceQueryResult</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.admin_update_owner"><code><span class="keyword">public func </span><span class="fnname">admin_update_owner</span>(<span class="parameter">new_owner</span> : <span class="type">Principal</span>) : <span class="keyword">async </span><span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.admin_update_icrc1"><code><span class="keyword">public func </span><span class="fnname">admin_update_icrc1</span>(<span class="parameter">requests</span> : [<span class="type">ICRC1.UpdateLedgerInfoRequest</span>]) : <span class="keyword">async </span>[<span class="type">Bool</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.admin_update_icrc2"><code><span class="keyword">public func </span><span class="fnname">admin_update_icrc2</span>(<span class="parameter">requests</span> : [<span class="type">ICRC2.UpdateLedgerInfoRequest</span>]) : <span class="keyword">async </span>[<span class="type">Bool</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.admin_init"><code><span class="keyword">public func </span><span class="fnname">admin_init</span>() : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.deposit_cycles"><code><span class="keyword">public func </span><span class="fnname">deposit_cycles</span>() : <span class="keyword">async </span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="Token.faucet"><code><span class="keyword">public func </span><span class="fnname">faucet</span>(<span class="parameter">account</span> : <span class="type">ICRC1.Account</span>) : <span class="keyword">async </span><span class="type">ICRC1.TransferResult</span></code></h4><p><p>Custom code for implementing rebase-able token</p>
<p>faucet</p>
</p></div><p></p></div></div></body></html>